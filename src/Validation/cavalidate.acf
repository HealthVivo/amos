## Convert a CA assembly to AMOS land, run validation steps

INPUTS = $(PREFIX).asm $(PREFIX).frg

#BINDIR = /local/asmg/Linux/bin
BINDIR = /local/asmg_devel/mschatz/WGA/AMOS/bin

## toAmos
10: $(BINDIR)/toAmos -f $(PREFIX).frg -a $(PREFIX).asm -o $(PREFIX).afg

## bank-transact
20: $(BINDIR)/bank-transact -m $(PREFIX).afg -b $(PREFIX).bnk -c

## asmQC
30: $(BINDIR)/asmQC -b $(PREFIX).bnk -feat -numsd 2

## bank2contig
40: $(BINDIR)/bank2contig $(PREFIX).bnk > $(PREFIX).contig

## frg2ta
45: $(BINDIR)/frg2ta $(PREFIX).frg

## getCoverage
50: /usr/local/bin/getCoverage -t --gapped -R -a all -M $(PREFIX).contig

## findTcovSnps
60: $(BINDIR)/findTcovSnp -noH $(PREFIX) > $(PREFIX).snps

## ClusterSnps
70: $(BINDIR)/clusterSnps $(PREFIX).snps > $(PREFIX).snp.feat

## Load SNP Features
80: $(BINDIR)/loadFeatures $(PREFIX).bnk $(PREFIX).snp.feat

## Find Surrogates
90: $(BINDIR)/listSurrogates $(PREFIX).asm > $(PREFIX).surrogate.feat

## Load Surrogates
100: $(BINDIR)/loadFeatures $(PREFIX).bnk $(PREFIX).surrogate.feat


## Dump Features
1000: $(BINDIR)/dumpFeatures $(PREFIX).bnk > $(PREFIX).all.feat

## Get Suspicious Features
1010: egrep "HIGH_SNP|HIGH_SHORT" $(PREFIX).all.feat | sort -k1 -nk3 > $(PREFIX).suspicious.feat

## Create Suspicious Regions
1020: $(BINDIR)/suspiciousfeat2region $(PREFIX).suspicious.feat > $(PREFIX).suspicious.regions
